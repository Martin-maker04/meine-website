function getEmaildadresseForHTML(){{var n="UoFi@XccUoCiHdk.Sc",o="JiBwuez0ApO8vTthg2YUlxHcEQ6nNRDZCkPfqIM1bdVs3oKjLaGm7F54ryXSW9",s=n.length;let a="",t;for(let e=0;e<n.length;e++)-1===o.indexOf(n.charAt(e))?(t=n.charAt(e),a+=t):(t=(o.indexOf(n.charAt(e))-s+o.length)%o.length,a+=o.charAt(t));return'<a target="_blank" rel="noopener noreferrer" href="mailto:'+a+'">Bitte schreiben Sie uns</a>'}}function dateFromddmmyyyy(e){var a=parseInt(e.substring(6,10)),t=parseInt(e.substring(3,5))-1,e=parseInt(e.substring(0,2));return new Date(a,t,e)}function createDateString(e){var a=e.getFullYear().toString(),t=(e.getMonth()+1).toString(),e=e.getDate().toString();return(e[1]?e:"0"+e[0])+"."+(t[1]?t:"0"+t[0])+"."+a}function doSetDate(e,a){$(a).attr("value",e),$(a).val(e),$(a).trigger("change")}let auto_changing=!1;function zuchtCalenderCalculateDatesFromUmlaven(e){if(!auto_changing){auto_changing=!0;const a=dateFromddmmyyyy(e);a.setDate(a.getDate()-9),doSetDate(createDateString(a),"input#zuchtkalender-koe_absperren-disp"),a.setDate(a.getDate()+10),doSetDate(createDateString(a),"input#zuchtkalender-annahmekontrolle-disp"),a.setDate(a.getDate()+4),doSetDate(createDateString(a),"input#zuchtkalender-kaefigen-disp"),a.setDate(a.getDate()+5),doSetDate(createDateString(a),"input#zuchtkalender-kaefigen2-disp"),a.setDate(a.getDate()+1),doSetDate(createDateString(a),"input#zuchtkalender-brutschrank-disp"),a.setDate(a.getDate()+1),doSetDate(createDateString(a),"input#zuchtkalender-schlupf-disp"),a.setDate(a.getDate()+1),doSetDate(createDateString(a),"input#zuchtkalender-voelkchen_bilden-disp"),a.setDate(a.getDate()+3),doSetDate(createDateString(a),"input#zuchtkalender-belegstelle-disp"),a.setDate(a.getDate()+9),doSetDate(createDateString(a),"input#zuchtkalender-abholen_belegstelle-disp"),auto_changing=!1}}function zuchtCalenderCalculateDatesFromBelegstelle(e){if(!auto_changing){auto_changing=!0;const a=dateFromddmmyyyy(e);a.setDate(a.getDate()-3),doSetDate(createDateString(a),"input#zuchtkalender-voelkchen_bilden-disp"),a.setDate(a.getDate()-1),doSetDate(createDateString(a),"input#zuchtkalender-schlupf-disp"),a.setDate(a.getDate()-2),doSetDate(createDateString(a),"input#zuchtkalender-kaefigen2-disp"),a.setDate(a.getDate()-5),doSetDate(createDateString(a),"input#zuchtkalender-kaefigen-disp"),a.setDate(a.getDate()-4),doSetDate(createDateString(a),"input#zuchtkalender-annahmekontrolle-disp"),a.setDate(a.getDate()-1),doSetDate(createDateString(a),"input#zuchtkalender-umlaven_einhaengen-disp"),a.setDate(a.getDate()-9),doSetDate(createDateString(a),"input#zuchtkalender-koe_absperren-disp"),a.setDate(a.getDate()+34),doSetDate(createDateString(a),"input#zuchtkalender-abholen_belegstelle-disp"),auto_changing=!1}}function doYiiAjaxQuery(t,n,e,a){e._csrf=$('meta[name="csrf-token"]').attr("content");const o=$.ajax({url:"/"+t.toLowerCase()+"/"+n.toLowerCase(),type:"POST",data:e});o.done(function(e){console.debug("Query from "+t+" for "+n+"() was successfull"),void 0!==a&&a(e?JSON.parse(e):{})}),o.fail(function(e,a){throw console.debug("Query from "+t+" for "+n+"() failed: "+e.status+": "+a),"Query from "+t+" for "+n+"() failed: "+e.status+": "+a})}function saveStandPosition(e,a,t,n){doYiiAjaxQuery("stand","savepositionfromajax",{id:e,lat:a,lng:t},n)}function saveStockStand(e,a){const t=$.ajax({url:"/stoecke/savestandfromajax",type:"POST",data:{standid:e,stockid:a}});t.done(function(){console.debug("Saving successfull")}),t.fail(function(e,a){console.debug("Saving failed: "+e.status+": "+a)})}function createStand(e,a,t,n,o,s,r,i,l){doYiiAjaxQuery("stand","createnewstandfromajax",{lat:e,lng:a,name:t,regnr:n,NST:o,street:s,plz:r,ort:i},l)}function saveStandData(e,a,t,n,o,s,r,i,l,u){doYiiAjaxQuery("stand","updatestandfromajax",{name:a,regnr:n,NST:t,standid:e,street:o,plz:s,ort:r,veterinaeramt:i,aktionWanderung:l},u)}function deleteStand(e,t){const a=$.ajax({url:"/stand/deletestandfromajax",type:"POST",data:{standid:e}});a.done(function(){console.debug("Deleting Stand was successfull"),t(0)}),a.fail(function(e,a){console.debug("Deleting Stand failed: "+e.status+": "+a),t(-1)})}function loadWeather(e,a,t){doYiiAjaxQuery("wetter","getactualweatherfromajax",{lat:e,lng:a},t)}function loadWeatherForecast(e,a,t){doYiiAjaxQuery("wetter","getweatherforecastfromajax",{lat:e,lng:a},t)}function loadHourlyWeatherForecast(e,a,t){doYiiAjaxQuery("wetter","gethourlyweatherforecastfromajax",{lat:e,lng:a},t)}function getAdressForCoordinates(e,a,t){const n=$.ajax({url:"/stand/getadressfromajax",type:"POST",data:{lat:e,lng:a}});console.debug(n),n.done(function(e){console.debug("Loading adress was successfull"),console.debug(e),t(JSON.parse(e))}),n.fail(function(e,a){console.debug("Loading adress failed: "+e.status+": "+a),t({})})}function getAdressForSearch(e,t){const a=$.ajax({url:"/stand/getlocationfromajax",type:"POST",data:{search:e}});a.done(function(e){console.debug("Loading adress for search was successfull"),t(JSON.parse(e))}),a.fail(function(e,a){console.debug("Loading adress for search failed: "+e.status+": "+a),t({})})}function dissolveStoecke(e,a,t,n,o,s){doYiiAjaxQuery("stoecke","aufloesenfromajax",{selectedreason:e,reason_comment:a,reciver_email:t,del_date:n,stockids:JSON.stringify(o)},s)}function moveStoecke(e,a,t,n){doYiiAjaxQuery("stoecke","umziehenfromajax",{standid:e,stockids:JSON.stringify(a),datum:t},n)}function copyStoecke(e,a,t){doYiiAjaxQuery("stoecke","kopierenfromajax",{stockids:JSON.stringify(e),cnt:a},t)}function parseReportData(e){let a=e;return"string"==typeof e&&(a=JSON.parse(e)),0===Object.keys(a).length?{series:[],sum:0,labels:[],labels2:[]}:(a.series=function a(t){for(let e=0;e<t.length;e++){var n=t[e];n instanceof Array?t[e]=a(t[e]):t[e]=+n}return t}(a.series),a)}function parseReportData2(e){let a=e;return"string"==typeof e&&(a=JSON.parse(e)),0===Object.keys(a).length?{series:[],sum:0,labels:[],labels2:[]}:a}function capitalizeFirstLetter(e){return null===e?e:e.charAt(0).toUpperCase()+e.slice(1)}function parseHiveWatchData(e){let a=e,t={series:[],sum:0,labels:[],labels2:[]};if("string"==typeof e&&(a=JSON.parse(e)),0===Object.keys(a).length)return t;for(let e=0;e<a.series.length;e++)t.series.push(a.series[e].y),t.labels.push(new Date(a.series[e].x));e=null!=a.name?capitalizeFirstLetter(a.name):null;return t.labels2.push(e),t}function parseBeeAndMeData(e,a,t){var n=luxon.DateTime.fromSeconds(parseInt(a)).toMillis(),o=luxon.DateTime.fromSeconds(parseInt(t)).toMillis();let s=e,r={series:[],sum:0,labels:[],labels2:[],i18n:[]};"string"==typeof s&&(s=JSON.parse(e));a={weight:yii.t("app","weight"),temperature:yii.t("app","temperature"),nestTemperature:yii.t("app","nestTemperature"),humidity:yii.t("app","humidity")};r.labels2=Object.values(a);for(const l of s){var i=Math.round(1e3*l.measurementDateTime);if(!(i<n||o<i)){let e=[];for(const u of Object.keys(r.labels2))e.push(l[u]);r.labels.push(new Date(i)),r.series.push(e)}}return r}function parseThingSpeakData(e){let t=e,n={series:[],sum:0,labels:[],labels2:[],i18n:[]};if("string"==typeof e&&(t=JSON.parse(e)),0===Object.keys(t).length||0===t.channel.length||0===t.feeds.length)return n;let o=[];for(const a in t.channel)a.startsWith("field")&&(n.labels2.push(t.channel[a]),o.push(a));for(let a=0;a<t.feeds.length;a++){let e=[];for(const i in o){var s=o[i];e.push(t.feeds[a][s])}var r=new Date(t.feeds[a].created_at);n.labels.push(r),n.series.push(e)}return n}function parseBeeConnect(e){let a=e,t={series:[],sum:0,labels:[],labels2:[],i18n:[]};"string"==typeof e&&(a=JSON.parse(e));const n=[...new Set(a.map(e=>capitalizeFirstLetter(e.SeriesKey.replace("-"," "))))],o=[...new Set(a.map(e=>e.generated_hour))],s=[];for(let a=0;a<o.length;a++){o[a]=new Date(o[a]).getTime(),s[a]=[];for(let e=0;e<n.length;e++)s[a][e]=null}a.forEach(e=>{var a=o.indexOf(new Date(e.generated_hour).getTime()),t=n.indexOf(capitalizeFirstLetter(e.SeriesKey.replace("-"," ")));s[a][t]=e.value});for(let e=0;e<o.length;e++)o[e]=new Date(o[e]);return t.labels=o,t.labels2=n,t.series=s,t}function parseBeep(e){let a=e,t={series:[],sum:0,labels:[],labels2:[],i18n:[]};"string"==typeof a&&(a=JSON.parse(e));var n=["temperature","humidity","precipIntensity","windSpeed","weight_kg"],e=[yii.t("app","temperature"),yii.t("app","humidity"),yii.t("app","precipIntensity"),yii.t("app","windSpeed"),yii.t("app","weight_kg")];for(const o of a){let e=[];for(const s of n)e.push(o[s]);t.labels.push(Date.parse(o.time)),t.series.push(e)}t.labels2=[];for(const r of e)t.labels2.push(capitalizeFirstLetter(r));return t}function average(a){let t=0;for(let e=0;e<a.length;e++)t+=parseFloat(a[e]);return t/a.length}function parseIsoDatetime(e){e=e.split(/[: T-]/).map(parseFloat);return new Date(e[0],e[1]-1,e[2],e[3]||0,e[4]||0,e[5]||0,0)}function getClassifiedValues(t,n){let o=[];for(let a=0;a<t.length;a++){let e=parseIsoDatetime(t[a].created_at);var s=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),l=e.getHours();for(const c in n){var u=n[c];o.hasOwnProperty(u)||(o[u]={}),o[u].hasOwnProperty(s)||(o[u][s]={}),o[u][s].hasOwnProperty(r)||(o[u][s][r]={}),o[u][s][r].hasOwnProperty(i)||(o[u][s][r][i]=[]),o[u][s][r][i].hasOwnProperty(l)||(o[u][s][r][i][l]=[]),o[u][s][r][i][l].push(t[a][u])}}return o}function loadHonigernteProJahr(e,a,t){const n=$.ajax({url:"/honigernte/report",type:"POST",data:{from:e,to:a}});n.done(function(e){console.debug("Loading Honigernte pro Jahr was successfull"),t(parseReportData(e))}),n.fail(function(e,a){console.debug("Loading Honigernte pro Jahr failed: "+e.status+": "+a),t({})})}function loadWaage(e,t){const a=$.ajax({url:"/abfeiern/getwaageforreportsfromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Waage was successfull"),t(parseReportData(e))}),a.fail(function(e,a){console.debug("Loading Waage failed: "+e.status+": "+a),t({})})}function loadRasse(e,t){const a=$.ajax({url:"/abfeiern/getrasseforreportsfromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Bienenrasse was successfull"),t(parseReportData(e))}),a.fail(function(e,a){console.debug("Loading Bienenrasse failed: "+e.status+": "+a),t({})})}function loadKundenLand(e,t){const a=$.ajax({url:"/abfeiern/getkundenlandforreportsfromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Kundenland was successfull"),t(parseReportData(e))}),a.fail(function(e,a){console.debug("Loading Kundenland failed: "+e.status+": "+a),t({})})}function loadStandmass(e,t){const a=$.ajax({url:"/abfeiern/getstoeckestandmassforreportsfromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Standmass was successfull"),t(parseReportData(e))}),a.fail(function(e,a){console.debug("Loading Standmass failed: "+e.status+": "+a),t({})})}function loadVolktyp(e,t){const a=$.ajax({url:"/abfeiern/getstoecketypforreportsfromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Volktyp was successfull"),t(parseReportData(e))}),a.fail(function(e,a){console.debug("Loading Volktyp failed: "+e.status+": "+a),t({})})}function loadUsedFuttersorte(e,t){const a=$.ajax({url:"/abfeiern/getfuttersorteforreportsfromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Futtersorte was successfull"),t(parseReportData(e))}),a.fail(function(e,a){console.debug("Loading Futtersorte failed: "+e.status+": "+a),t({})})}function loadWaagen(e,t){const a=$.ajax({url:"/abfeiern/getwaagenforreportsfromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Waagen was successfull"),t(parseReportData(e))}),a.fail(function(e,a){console.debug("Loading Waagen failed: "+e.status+": "+a),t({})})}function loadUsedHonigsorte(e,t){const a=$.ajax({url:"/abfeiern/gethonigsortenforreportsfromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Honigsorte was successfull"),t(parseReportData(e))}),a.fail(function(e,a){console.debug("Loading Honigsorte failed: "+e.status+": "+a),t({})})}function loadUsedvarroakontrollmethode(e,t){const a=$.ajax({url:"/abfeiern/getvarroakontrollmethodeforreportsfromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Usedvarroakontrollmethode was successfull"),t(parseReportData(e))}),a.fail(function(e,a){console.debug("Loading Usedvarroakontrollmethode failed: "+e.status+": "+a),t({})})}function loadUsedvarroamethode(e,t){const a=$.ajax({url:"/abfeiern/getvarroamethodeforreportsfromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Usedvarroamethode was successfull"),t(parseReportData(e))}),a.fail(function(e,a){console.debug("Loading Usedvarroamethode failed: "+e.status+": "+a),t({})})}function loadUsedvarroamittel(e,t){const a=$.ajax({url:"/abfeiern/getvarroamittelforreportsfromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Usedvarroamittel was successfull"),t(parseReportData(e))}),a.fail(function(e,a){console.debug("Loading Usedvarroamittel failed: "+e.status+": "+a),t({})})}function loadUserverteilung(e,t){const a=$.ajax({url:"/abfeiern/getuserverteilungforreportsfromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Userverlauf was successfull"),t(parseReportData(e))}),a.fail(function(e,a){console.debug("Loading Userverlauf failed: "+e.status+": "+a),t({})})}function loadUserzahlweise(e,t){const a=$.ajax({url:"/abfeiern/getuserzahlweiseforreportsfromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Userzahlweise was successfull"),t(parseReportData(e))}),a.fail(function(e,a){console.debug("Loading Userzahlweise failed: "+e.status+": "+a),t({})})}function loadUserzahlnterval(e,t){const a=$.ajax({url:"/abfeiern/getuserzahlintervalforreportsfromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Userzahlinterval was successfull"),t(parseReportData(e))}),a.fail(function(e,a){console.debug("Loading Userzahlinterval failed: "+e.status+": "+a),t({})})}function loadUserverlauf(e,t){const a=$.ajax({url:"/abfeiern/getuserverlaufforreportsfromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Userzahlinterval was successfull"),t(parseReportData(e))}),a.fail(function(e,a){console.debug("Loading Userzahlinterval failed: "+e.status+": "+a),t({})})}function loadHonigernteProStand(e,a,t){const n=$.ajax({url:"/honigernte/stand-report",type:"POST",data:{from:e,to:a}});n.done(function(e){console.debug("Loading Honigernte pro Stand was successfull"),t(parseReportData(e))}),n.fail(function(e,a){console.debug("Loading Honigernte pro Stand failed: "+e.status+": "+a),t({})})}function loadFuetterungProJahr(e,a,t){const n=$.ajax({url:"/fuetterung/getfuetterungforreportsfromajax",type:"POST",data:{from:e,to:a}});n.done(function(e){console.debug("Loading Fuetterung pro Jahr was successfull"),t(parseReportData(e))}),n.fail(function(e,a){console.debug("Loading Fuetterung pro Jahr failed: "+e.status+": "+a),t({})})}function loadFuetterungProStand(e,a,t){const n=$.ajax({url:"/fuetterung/getfuetterungforstandforreportsfromajax",type:"POST",data:{from:e,to:a}});n.done(function(e){console.debug("Loading Fuetterung pro Stand was successfull"),t(parseReportData(e))}),n.fail(function(e,a){console.debug("Loading Fuetterung pro Stand failed: "+e.status+": "+a),t({})})}function loadAufgeloesteStoeckeProVolkart(e,a,t){const n=$.ajax({url:"/stoecke/getaufgeloestestoeckeprovolkartfromajax",type:"POST",data:{from:e,to:a}});n.done(function(e){console.debug("Loading Aufgeloest pro Volkart was successfull"),t(parseReportData(e))}),n.fail(function(e,a){console.debug("Loading Aufgeloest pro Volkart failed: "+e.status+": "+a),t({})})}function loadAufgeloesteStoeckeProReason(e,a,t){const n=$.ajax({url:"/stoecke/getaufgeloestestoeckeproreasonfromajax",type:"POST",data:{from:e,to:a}});n.done(function(e){console.debug("Loading Stoecke pro Reason was successfull"),t(parseReportData(e))}),n.fail(function(e,a){console.debug("Loading Stoecke pro Reason failed: "+e.status+": "+a),t({})})}function loadAufgeloesteStoekeProStand(e,a,t){const n=$.ajax({url:"/stoecke/getaufgeloestestoeckeprostandfromajax",type:"POST",data:{from:e,to:a}});n.done(function(e){console.debug("Loading Wirtschaftsvoelker pro Stand was successfull"),t(parseReportData(e))}),n.fail(function(e,a){console.debug("Loading Wirtschaftsvoelker pro Stand failed: "+e.status+": "+a),t({})})}function loadWitschaftsVoelkerProStand(e,a,t){const n=$.ajax({url:"/stand/getwirtschaftsvolkreportsfromajax",type:"POST",data:{from:e,to:a}});n.done(function(e){console.debug("Loading Wirtschaftsvoelker pro Stand was successfull"),t(parseReportData(e))}),n.fail(function(e,a){console.debug("Loading Wirtschaftsvoelker pro Stand failed: "+e.status+": "+a),t({})})}function loadAblegerProStand(e,a,t){const n=$.ajax({url:"/stand/getablegerreportsfromajax",type:"POST",data:{from:e,to:a}});n.done(function(e){console.debug("Loading Ableger pro Stand was successfull"),t(parseReportData(e))}),n.fail(function(e,a){console.debug("Loading Ableger pro Stand failed: "+e.status+": "+a),t({})})}function loadKoeniginnenProStand(e,a,t){const n=$.ajax({url:"/stand/getkoeniginnenreportsfromajax",type:"POST",data:{from:e,to:a}});n.done(function(e){console.debug("Loading Königinnen pro Stand was successfull"),t(parseReportData(e))}),n.fail(function(e,a){console.debug("Loading Königinnen pro Stand failed: "+e.status+": "+a),t({})})}function loadVaroaBehandlungPerYear(e,a,t){const n=$.ajax({url:"/varroabehandlung/varroa-behandlung",type:"POST",data:{from:e,to:a}});n.done(function(e){console.debug("Loading Varoabehandlung pro Stand was successfull");e=parseReportData(e);t(e)}),n.fail(function(e,a){console.debug("Loading Varoabehandlung pro Stand failed: "+e.status+": "+a),t({})})}function loadVaroaverlaufPerYear(e,a,t){const n=$.ajax({url:"/varroabehandlung/verlauf",type:"POST",data:{from:e,to:a}});n.done(function(e){console.debug("Loading Varoaverlauf was successfull");e=parseReportData(e);t(e)}),n.fail(function(e,a){console.debug("Loading Varoaverlauf failed: "+e.status+": "+a),t({})})}function loadVaroaverlaufStockReportPerYear(e,a,t){const n=$.ajax({url:"/varroabehandlung/verlauf-stock",type:"POST",data:{year:e,stock:a}});n.done(function(e){console.debug("Loading Varoaverlauf pro Stock was successfull");e=parseReportData(e);console.debug(e),t(e)}),n.fail(function(e,a){console.debug("Loading Varoaverlauf pro Stock failed: "+e.status+": "+a),t({})})}function loadDurchschauverlaufPerYear(e,a,t,n,o){const s=$.ajax({url:"/durchschau/verlauf",type:"POST",data:{verlaufType:e,from:a,to:t,stock:n}});s.done(function(e){e=parseReportData2(e);o(e)}),s.fail(function(e,a){console.debug("Loading Durchschauverlauf failed: "+e.status+": "+a),o({})})}function loadDurchschauOverviewPerYear(e,a,t,n){const o=$.ajax({url:"/durchschau/overview",type:"POST",data:{from:e,to:a,stock:t}});o.done(function(e){n(e)}),o.fail(function(e,a){console.debug("Loading DurchschauOverview failed: "+e.status+": "+a),n({})})}function loadVaroaverlaufStandPerYear(e,a,t,n){const o=$.ajax({url:"/varroabehandlung/verlauf-stand",type:"POST",data:{from:e,to:a,stand:t}});o.done(function(e){console.debug("Loading Varoaverlauf for stand was successfull");e=parseReportData(e);n(e)}),o.fail(function(e,a){console.debug("Loading Varoaverlauf for stand failed: "+e.status+": "+a),n({})})}function loadBestandverlaufPerYear(e,t){const a=$.ajax({url:"/bestand/getbestandverlauffromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Bestandverlauf was successfull");e=parseReportData(e);t(e)}),a.fail(function(e,a){console.debug("Loading Bestandverlauf failed: "+e.status+": "+a),t({})})}function loadBestandsverlaufKategoriePerYear(e,t){const a=$.ajax({url:"/bestand/getbestandsverlaufkategoriefromajax",type:"POST",data:{year:e}});a.done(function(e){console.debug("Loading Bestandverlauf for kategorie was successfull");e=parseReportData(e);t(e)}),a.fail(function(e,a){console.debug("Loading Bestandverlauf for kategorie failed: "+e.status+": "+a),t({})})}const loadHoneyPi=async(n,e,a,t,o,s)=>{t=luxon.DateTime.fromSeconds(parseInt(t)).toFormat("yyyy-LL-dd HH:mm:ss"),o=luxon.DateTime.fromSeconds(parseInt(o)).toFormat("yyyy-LL-dd HH:mm:ss");return n=n.replace("{CHANNELID}",a).replace("{APIKEY}",e).replace("{START}",t).replace("{END}",o),new Promise((a,t)=>{const e=$.ajax({url:n,ifModified:!0});e.done(function(e){console.debug("Loading Honey Pi data from thingspeak was successfull");e=parseThingSpeakData(e);s(e),a(!0)}),e.fail(function(e,a){console.debug("Loading Honey Pi data failed: "+e.status+": "+a),t("failed")})})},loadHiveWatchSelectRequest=async(i,l,u)=>{let c;return new Promise((o,n)=>{let a=[];const s=Date.now();$.each(u,function(t){c=i.replace("{CONTROLLER}",u[t][0]).replace("{CHANNEL}",u[t][1]).replace("{TOKEN}",l).replace("{START}",s).replace("{END}",s).replace("{ISLIVEFEEDURL}",hiveWatchLinkIsLiveFeed()?"1":"0");const e=$.ajax({url:c,headers:{"x-share-token":l},ifModified:!0,cache:!0});a.push(e),e.fail((e,a)=>{console.log("Loading HiveWatch Channel "+u[t]+" data failed: "+e.status+": "+a),n("failed")})});let r=[];Promise.all(a).then(function(e,a){let t=0;for(var n of e)"ext_weight"==n.type&&r.push({id:u[t],name:n.name}),t++;o(r)})})},loadBeepSelectRequest=async(a,e,t)=>(a=a.replace("{USER}",encodeURIComponent(e)).replace("{SECRET}",encodeURIComponent(t)),new Promise((t,n)=>{const e=$.ajax({url:a,cache:!1});e.done(function(e){console.debug("Loading Beep data was successfull");let a=e;"string"==typeof e&&(a=JSON.parse(e)),t(a)}),e.fail(function(e,a){console.debug("Loading Devices of Beep data failed: "+e.status+": "+a),n("failed")})})),loadBeep=async(n,e,a,t,o,s,r)=>{o=luxon.DateTime.fromSeconds(parseInt(o)).toFormat("yyyy-LL-dd HH:mm:ss"),s=luxon.DateTime.fromSeconds(parseInt(s)).toFormat("yyyy-LL-dd HH:mm:ss");return n=n.replace("{USER}",e).replace("{SECRET}",a).replace("{DEVICEID}",t).replace("{START}",o).replace("{END}",s),new Promise((a,t)=>{const e=$.ajax({url:n,ifModified:!0});e.done(function(e){console.debug("Loading BEEP data from thingspeak was successfull");e=parseBeep(e);r(e),a(!0)}),e.fail(function(e,a){console.debug("Loading BEEP data failed: "+e.status+": "+a),t("failed")})})},loadHiveWatch=async(o,s,u,e,a,c)=>{const r=luxon.DateTime.fromSeconds(parseInt(e)).toMillis(),g=luxon.DateTime.fromSeconds(parseInt(a)).toMillis();let i;const d={windSpeed:yii.t("app","windSpeed"),precipIntensity:yii.t("app","precipIntensity"),dewPoint:yii.t("app","dewPoint"),windBearing:yii.t("app","windBearing"),cloudCover:yii.t("app","cloudCover"),pressure:yii.t("app","pressure")};let f=0;return hiveWatchLinkIsLiveFeed()&&(f=1),new Promise((l,n)=>{let a=[];$.each(u,function(t){i=o.replace("{CONTROLLER}",hiveWatchController).replace("{CHANNEL}",u[t]).replace("{TOKEN}",s).replace("{START}",r).replace("{END}",g).replace("{ISLIVEFEEDURL}",f.toString()),console.log("URL: "+i);const e=$.ajax({url:i,headers:{"x-share-token":s},ifModified:!0,cache:!0});a.push(e),e.fail((e,a)=>{console.log("Loading HiveWatch Channel "+hiveWatchController+"-"+u[t]+" data failed: "+e.status+": "+a),n("failed")})}),Promise.all(a).then(function(e){let a=[],t=0,n={labels:[],series:[],labels2:[]};for(var o of e)a[t]=parseHiveWatchData(o),null==a[t].labels2[0]&&(a[t].labels2[0]=void 0!==d[u[t][1]]?d[u[t][1]]:capitalizeFirstLetter(u[t][1])),t++;for(var s of a){n.labels2.push(s.labels2[0]);for(let e=0;e<s.labels.length;e++){let a=s.labels[e];var r=s.series[e],i=n.labels.findIndex(e=>e.getTime()===a.getTime());if(-1===i){n.labels.push(a);let e=new Array(n.labels2.length).fill(null);e[n.labels2.indexOf(s.labels2[0])]=r,n.series.push(e)}else n.series[i][n.labels2.indexOf(s.labels2[0])]=r}}l(!0),console.log(n),c(n)})})},loadBeeAndMe=async(e,a,t,n,o,s,r)=>{let i;var l=Date.now()-o;let u="YEAR";return l<=36e5?u="HOUR":l<=864e5?u="DAY":l<=6048e5?u="WEEK":l<=2592e6&&(u="MONTH"),i=e.replace("{SCALEID}",t).replace("{TOKEN}",a).replace("{SELECTOR}",u),new Promise((a,t)=>{const e=$.ajax({url:i,ifModified:!0,cache:!0});e.done(function(e){console.debug("Loading BeeAndMe data from server was successfull");e=parseBeeAndMeData(e,o,s);r(e),a(!0)}),e.fail(function(e,a){console.debug("Loading BeeAndMe data failed: "+e.status+": "+a),t("failed")})})},loadEasyHive=async(e,a,t,n,o,s,r)=>{var i=luxon.DateTime.fromSeconds(parseInt(o)).toISODate(),l=luxon.DateTime.fromSeconds(parseInt(s)).toISODate();const u=e.replace("{APIKEY}",t).replace("{USER}",a).replace("{START}",i).replace("{END}",l);return new Promise((a,t)=>{const e=$.ajax({url:u,ifModified:!0,cache:!0});e.done(function(e){console.debug("Loading EasyHive data from server was successfull");e=parseBeeAndMeData(e,o,s);r(e),a(!0)}),e.fail(function(e,a){console.debug("Loading EasyHive data failed: "+e.status+": "+a),t("failed")})})};function splitDateRange(t,n){const o=[];if(12*(n.getFullYear()-t.getFullYear())+(n.getMonth()-t.getMonth())<6)o.push({start:t,end:n});else{let e=new Date(t),a=new Date(t);for(;e<n;)a.setMonth(e.getMonth()+2,31),a>n&&(a=new Date(n)),o.push({start:new Date(e),end:new Date(a)}),e.setMonth(e.getMonth()+3,1)}return o}const loadBeeConnect=async(e,a,t,n,o,s,r)=>{o=luxon.DateTime.fromSeconds(parseInt(o)).toMillis(),s=luxon.DateTime.fromSeconds(parseInt(s)).toMillis();const i={series:[],sum:0,labels:[],labels2:[],i18n:[]};e=e.replace("{USER}",a).replace("{SECRET}",t).replace("{CHANNEL}",n).replace("{FROM}",o).replace("{TO}",s);try{var l=await $.ajax(e,{dataType:"json"}),u=(console.debug("Loading BeeConnect data from server was successful"),parseBeeConnect(l));i.series.push(...u.series),i.sum+=u.sum,i.labels.push(...u.labels),i.labels2.push(...u.labels2),i.i18n.push(...u.i18n)}catch(e){return console.log("Loading BeeConnect data from server failed: "+e.status+": "+e.statusText),Promise.reject("failed")}return r(i),Promise.resolve(!0)};function userCanMoreStaende(e){doYiiAjaxQuery("stand","Getcurrentusercanmorestandsfromajax",{},e)}function userCanMoreStoecke(e){doYiiAjaxQuery("stoecke","getcurrentusercanmorestoeckefromajax",{},e)}function userCanMoreBestaende(e){doYiiAjaxQuery("bestand","getcurrentusercanmorebestaendefromajax",{},e)}function userCanMoreArtikel(e){doYiiAjaxQuery("artikel","getcurrentusercanmoreartikelfromajax",{},e)}function userCanMoreZuchtkalender(e){doYiiAjaxQuery("zuchtkalender","getcurrentusercanmorezuchtreihenfromajax",{},e)}function showFlashMessage(e){doYiiAjaxQuery("site","showflashfromajax",{message:e},function(e){notie.alert(4,e,4)})}function doSearch(e,a){doYiiAjaxQuery("site","supersearchfromajax",{search:e},a)}function getActuelCosts(e,a,t,n,o,s){doYiiAjaxQuery("premium","actual-costs",{paymentMethod:e,timeRange:a,Aktion:t,usergroup:n,gutscheincode:o},s)}function getActualCostsFiscalization(e,a,t,n){doYiiAjaxQuery("fiscalization/fiscalization","getactualcostsfromajax",{paymentMethod:e,timeRange:a,Aktion:t},n)}function getUserData(e){doYiiAjaxQuery("stand","getuserstandstocksfromajax",{},e)}function getStockTemplate(e){doYiiAjaxQuery("stoecke","getstocktemplatefromajax",{},e)}function getTranslate(e,a){doYiiAjaxQuery("site","translatefromajax",{keys:e},a)}function getUserAktion(e){doYiiAjaxQuery("Imkervereine","Getuseraktionfromajax",{},e)}function getKassenbuchTransactions(e,a){doYiiAjaxQuery("Kassenbuch","kassenbuch",{year:e},a)}function getKassenbuchStartYear(e){doYiiAjaxQuery("Kassenbuch","start-year",{},e)}function getLanguage(e){doYiiAjaxQuery("Kassenbuch","language",{},e)}function getLabeltext(e,a){doYiiAjaxQuery("Site","getlabeltextfromajax",{attributname:e},a)}function getAdInAd(e,a,t,n){doYiiAjaxQuery("Adinads","Getaddcontentfromajax",{cid:e,cw:a,ch:t},n)}function getStandardMapping(e,o){doYiiAjaxQuery("Standard","getstandardmappingfromajax",{category:e},function(a){const t=[];if(void 0!==a)for(let e=0;e<a.length;e++){const n=a[e];t[n.s_id.toString()]=n.Klartext}o(t)})}