(function( infolayer, $ ) {
	
	function init()  {
        var container = $("div#infolayer_container");
        if (container.length>0) {
            var dataContainer = $("<div>", {});
            dataContainer.load("/site/info", 
                function() {
                    if (""!==dataContainer.html()) {
                        $(container).load("/lib/seti/infolayer.html", function() {
                            $("#infolayer_rendered").html(dataContainer.html());                            

                            $('div#infolayer_model').on('hide.bs.modal', function(){
                                $("html, body").css("overflow","");
                            });

                            $('div#infolayer_model').on('show.bs.modal', function(){
                                $("html, body").css("overflow","hidden");
                            });	                            
                            if ($(window).height() > $('#infolayer_rendered > div').height()) {
                                $('#infolayer_model #infolayer_content .container').css({
                                    'position': 'relative',
                                    'top': '50%',
                                    'transform': 'translateY(-50%)'
                                });
                                
                            }                            
                            
                            $('#infolayer_model').modal('show');  
                        });
                    }                    
                }
            );          
        }
	}
		  
	$(document).ready(init);
	
} ( window.infolayer = window.infolayer || {}, jQuery ));