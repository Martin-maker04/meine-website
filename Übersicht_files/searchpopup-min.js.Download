var searchDialogTimer,currentSelected=-1;
/**
 * Attaches the dialog to the body
 * @returns {undefined}
 */
function attachSearchDialog(){if(null!==$("#searchdialog_container")){$("body").append('<div id="searchdialog_container"><div class="col-xs-12"><button onclick="closeSearchDialog();" class="btn btn-success" style="float:right;" id="searchdialog_button" type="button"><i class="fa fa-times"></i></button><span style="display: block;overflow: hidden;"><input placeholder="Suche" id="searchdialog_input" class="form-control" type="text" name="search" onkeyup="coolKeyUpFunctionSearchDialog(event)" onkeydown="clearTimeout(searchDialogTimer);"></span><div><div class="row" id="seachdialog_resultcontainer"><div></div>')}}function coolKeyUpFunctionSearchDialog(e){if(clearTimeout(searchDialogTimer),13===e.keyCode){var l=$(".searchresultselected");0!==l.length&&(window.location.href=l.attr("data-location"))}else 38===e.keyCode?currentSelected>1&&($(".searchresult:nth-child("+currentSelected+")").toggleClass("searchresultselected"),currentSelected--,$(".searchresult:nth-child("+currentSelected+")").toggleClass("searchresultselected")):40===e.keyCode?0===$(".searchresultselected").length?(currentSelected=1,$(".searchresult:nth-child("+currentSelected+")").toggleClass("searchresultselected")):($(".searchresult:nth-child("+currentSelected+")").toggleClass("searchresultselected"),currentSelected=Math.min(currentSelected+1,$(".searchresult").length),$(".searchresult:nth-child("+currentSelected+")").toggleClass("searchresultselected")):27===e.keyCode?($("#searchdialog_input").val(""),clearResults(),closeSearchDialog()):standlitypingTimer=setTimeout(searchDialogTimer,250)}function showResults(e){function l(e){return'<div class="col-xs-12 searchresult" data-location="'+(l=e.link,c=e.id,t="/"+l,t+="?id="+c)+'"><div class="col-xs-2">'+e.table+'</div><div class="col-xs-5">'+e.display+'</div><div class="col-xs-5">'+e.value+"</div></div>";var l,c,t}clearResults();for(var c="",t=0;t<e.length;t++){c+=l(e[t])}$("#seachdialog_resultcontainer").html(c),$(".searchresult").on("click",function(e){var l=$(e.currentTarget).attr("data-location");l&&(window.location.href=l)})}function clearResults(){currentSelected=-1,$("#seachdialog_resultcontainer").html("")}function searchDialogTimer(){var e=$("#searchdialog_input").val();e.length>0?doSearch(e,showResults):clearResults()}
/**
 * Closes the popup
 */function closeSearchDialog(){$("#searchdialog_input").val(""),$("#searchdialog_container").css("display","none")}function showSearchDialog(){attachSearchDialog(),$("#searchdialog_container").css("display","block"),$("#searchdialog_input").focus()}$(window).ready(function(){$("html").on("keyup",function(e){83===e.keyCode&&("body"===document.activeElement.localName&&showSearchDialog())})});